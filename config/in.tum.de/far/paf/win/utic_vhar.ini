[DEFAULT]
domain_name: in.tum.de
setup_name: far
user_name: paf
platform_name: win
config_directory: C:\HapticCalib
data_directory: C:\HapticCalib\vhardata_mvl
record_directory: C:\HapticCalib\tmp_record

[ubitrack]
components_path = C:\HapticCalib\ubitrack-install\bin\ubitrack

;
; Phantom Omni Defaults
;
[ubitrack.devices.phantom_omni]
joint_length1: 0.13335
joint_length2: 0.13335
origin_offset_x: 0.0
origin_offset_y: -0.11
origin_offset_z: -0.035

;
; Phantom Premium 1.5 Defaults
; (needs verification)
[ubitrack.devices.phantom_premium15]
joint_length1: 0.20955
joint_length2: 0.20955
origin_offset_x: 0.0
origin_offset_y: 0.0
origin_offset_z: 0.0

;
; Phantom Premium 3.0 Defaults
; (needs verification)
[ubitrack.devices.phantom_premium30]
joint_length1: 0.4572
joint_length2: 0.4572
origin_offset_x: 0.0
origin_offset_y: 0.0
origin_offset_z: 0.0

; not yet working
;[extensions]
;autostart: calibration_wizard

;
;
; Calibration Wizard Configuration
;
;
[calibration_wizard]
wizards: default_camera,vuzix_hmd,time_delay_estimation,phantom_colocation,ismar14,time_delay_estimation_3way,workspace_calibration_3way
config_version: 2

domain: %(domain_name)s
setup: %(setup_name)s
user: %(user_name)s
platform: %(platform_name)s
home: %(home_directory)s

[calibration_wizard.default_camera]
name: Default Camera
module_namespace: vharcalibration.default_camera.module
config_namespace: vc.default_camera

[calibration_wizard.vuzix_hmd]
name: Vuzix HMD
module_namespace: vharcalibration.stereo_camera.module
config_namespace: vc.vuzix_hmd

[calibration_wizard.time_delay_estimation]
name: Time-Delay Estimation
module_namespace: vharcalibration.time_delay_estimation.module
config_namespace: vc.time_delay_estimation

[calibration_wizard.phantom_colocation]
name: Phantom Co-Location
module_namespace: vharcalibration.phantom_colocation.module
config_namespace: vc.phantom_colocation

[calibration_wizard.ismar14]
name: ISMAR 2014 Demo
module_namespace: vharcalibration.ismar14.module
config_namespace: vc.ismar14

[calibration_wizard.time_delay_estimation_3way]
name: 3Way Time Delay Estimation
module_namespace: vharcalibration.time_delay_estimation_3way.module
config_namespace: vc.time_delay_estimation_3way

[calibration_wizard.workspace_calibration_3way]
name: 3Way VHAR Workspace Calibration
module_namespace: vharcalibration.workspace_calibration_3way.module
config_namespace: vc.workspace_calibration_3way


;
;
; Default Camera Calibration Wizard
;
;
[vc.default_camera]
name: Default Camera Calibration
facade_handler: inprocess
rootdir: %(config_directory)s\vharcalibration
calibdir: %(rootdir)s\calib\default_camera\%(domain_name)s\%(setup_name)s\%(user_name)s
dfgdir: %(rootdir)s\dfgs\default_camera\%(domain_name)s\%(setup_name)s\%(user_name)s\%(platform_name)s
resultsdir: %(data_directory)s\default_camera\%(setup_name)s\%(user_name)s

[vc.default_camera.modules.calibration_start]
enabled: True
name: Start Default Camera Calibration

[vc.default_camera.modules.camera_intrinsics]
enabled: True
dfg_filename: camera_intrinsics.dfg
name: Camera Intrinsics
dependencies: calibration_start
calib_files: ueye_intrinsics.calib,ueye_distortion.calib

[vc.default_camera.modules.camera_handeye]
enabled: True
dfg_filename: camera_handeye_calibration.dfg
name: Camera Hand-Eye
dependencies: camera_intrinsics
calib_files: ueye_hand_eye_calibration.calib,tracker_marker_transform.calib

[vc.default_camera.modules.calibration_result]
enabled: True
;dfg_filename: vhar_calibration_verification.dfg
name: Camera Calibration Result
dependencies: camera_intrinsics,camera_handeye
report_filename: calibration_report.yaml

;
;
; VUZIX HMD Calibration
;
;
[vc.vuzix_hmd]
name: Vuzix HMD Calibration
facade_handler: inprocess
rootdir: %(config_directory)s\vharcalibration
calibdir: %(rootdir)s\calib\vuzix_hmd\%(domain_name)s\%(setup_name)s\%(user_name)s
dfgdir: %(rootdir)s\dfgs\vuzix_hmd\%(domain_name)s\%(setup_name)s\%(user_name)s\%(platform_name)s
resultsdir: %(data_directory)s\vuzix_hmd\%(setup_name)s\%(user_name)s

[vc.vuzix_hmd.modules.calibration_start]
enabled: True
name: Start Vuzix HMD Calibration

[vc.vuzix_hmd.modules.camera_intrinsics_left]
enabled: True
dfg_filename: camera_intrinsics_vuzix_left.dfg
name: Camera Intrinsics Left
dependencies: calibration_start
calib_files: vuzix_left_intrinsics.calib,vuzix_left_distortion.calib

[vc.vuzix_hmd.modules.camera_intrinsics_right]
enabled: True
dfg_filename: camera_intrinsics_vuzix_right.dfg
name: Camera Intrinsics Right
dependencies: camera_intrinsics_left
calib_files: vuzix_right_intrinsics.calib,vuzix_right_distortion.calib

[vc.vuzix_hmd.modules.camera_handeye]
enabled: True
dfg_filename: camera_handeye_calibration_vuzix.dfg
name: Camera Hand-Eye
dependencies: camera_intrinsics_left,camera_intrinsics_right
calib_files: vuzix_hand_eye_calibration.calib,tracker_marker_transform.calib

[vc.vuzix_hmd.modules.camera_stereo]
enabled: True
dfg_filename: camera_stereocalib_vuzix.dfg
name: Camera Stereo Transform
dependencies: camera_intrinsics_left,camera_intrinsics_right,camera_handeye
calib_files: vuzix_stereo_transform.calib

[vc.vuzix_hmd.modules.calibration_result]
enabled: True
name: Vuxiz HMD Calibration Result
dependencies: camera_intrinsics_left,camera_intrinsics_right,camera_handeye,camera_stereo
report_filename: calibration_report.yaml

;
;
; Time-Delay Estimation Calibration
;
;
[vc.time_delay_estimation]
name: Time-Delay Estimation
rootdir: %(config_directory)s\vharcalibration
calibdir: %(rootdir)s\calib\time_delay_estimation\%(domain_name)s\%(setup_name)s\%(user_name)s
dfgdir: %(rootdir)s\dfgs\time_delay_estimation\%(domain_name)s\%(setup_name)s\%(user_name)s\%(platform_name)s
resultsdir: %(data_directory)s\time_delay_estimation\%(setup_name)s\%(user_name)s
facade_handler: inprocess
;livepreview: time_delay_estimation_preview

;[vc.time_delay_estimation.preview]
;dfg_filename: vhar_timedelay_livepreview.dfg
;sync_source: camera_image
;shared_calibdir: %(config_directory)s\vharcalibration\calib\shared\%(domain_name)s\%(setup_name)s\%(user_name)s

[vc.time_delay_estimation.initialize_files]
absolute_orientation_calibration.calib: %(config_directory)s\vharcalibration\calib\init\absolute_orientation_calibration.calib
tooltip_calibration.calib: %(config_directory)s\vharcalibration\calib\init\tooltip_calibration.calib
delay_haptic_to_external_tracker.calib: %(config_directory)s\vharcalibration\calib\init\delay_haptic_to_external_tracker.calib

[vc.time_delay_estimation.modules.calibration_start]
enabled: True
name: Start Time-Delay Estimation

[vc.time_delay_estimation.modules.tooltip_calibration]
enabled: True
name: Tooltip Calibration
dependencies: calibration_start
dfg_filename: calibration_tooltip.dfg
calib_files: tooltip_calibration.calib
recorddir: %(record_directory)s\tooltip

[vc.time_delay_estimation.modules.absolute_orientation_calibration]
enabled: True
name: Absolute Orientation
dependencies: tooltip_calibration
dfg_filename: calibration_absolute_orientation_init.dfg
calib_files: absolute_orientation_calibration.calib
recorddir: %(record_directory)s\absolute_orientation

[vc.time_delay_estimation.modules.timedelay_estimation_calibration]
enabled: True
name: Time-Delay Estimation
dependencies: tooltip_calibration,absolute_orientation_calibration
calib_files: delay_haptic_to_external_tracker.calib
dfg_filename: calibration_timedelay.dfg

[vc.time_delay_estimation.modules.calibration_result]
enabled: True
name: Time-Delay Estimation Result
dependencies: tooltip_calibration,absolute_orientation_calibration,timedelay_estimation_calibration
report_filename: calibration_report.yaml

;
;
; Phantom Co-Location Calibration
;
;
[vc.phantom_colocation]
name: Phantom Co-Location Calibration
rootdir: %(config_directory)s\vharcalibration
calibdir: %(rootdir)s\calib\phantom_colocation\%(domain_name)s\%(setup_name)s\%(user_name)s
dfgdir: %(rootdir)s\dfgs\phantom_colocation\%(domain_name)s\%(setup_name)s\%(user_name)s\%(platform_name)s
resultsdir: %(data_directory)s\phantom_colocation\%(setup_name)s\%(user_name)s
facade_handler: inprocess
haptic_device: phantom_premium15

; currently not implemented
; use_2ndorder_model: true

; no livepreview since it's now connected to the H3D Host
;livepreview: phantom_colocation

;[vc.phantom_colocation.preview]
;dfg_filename: vhar_calibration_host_flea2.dfg
;shared_calibdir: %(config_directory)s\vharcalibration\calib\shared\%(domain_name)s\%(setup_name)s\%(user_name)s

[vc.phantom_colocation.initialize_files]
absolute_orientation_calibration.calib: %(config_directory)s\vharcalibration\calib\init\absolute_orientation_calibration.calib
phantom_jointangle_correction.calib: %(config_directory)s\vharcalibration\calib\init\phantom_jointangle_correction.calib
phantom_gimbalangle_correction.calib: %(config_directory)s\vharcalibration\calib\init\phantom_gimbalangle_correction.calib
tooltip_calibration.calib: %(config_directory)s\vharcalibration\calib\init\tooltip_calibration.calib
zref_axis.calib: %(config_directory)s\vharcalibration\calib\init\zref_axis.calib


[vc.phantom_colocation.modules.calibration_start]
enabled: True
name: Start Phantom Co-Location Calibration

[vc.phantom_colocation.modules.tooltip_calibration]
enabled: True
name: Tooltip Calibration
dependencies: calibration_start
dfg_filename: calibration_tooltip.dfg
calib_files: tooltip_calibration.calib
recorddir: %(record_directory)s\tooltip
autocomplete_enable: True
; maximum distance between consecutive results as euclidean norm
autocomplete_maxerror: 0.0001

[vc.phantom_colocation.modules.absolute_orientation_calibration]
enabled: True
name: Absolute Orientation
dependencies: tooltip_calibration
dfg_filename: calibration_absolute_orientation.dfg
calib_files: absolute_orientation_calibration.calib
recorddir: %(record_directory)s\absolute_orientation
autocomplete_enable: True
; maximum distance between consecutive results as euclidean norm for translation and angle for rotation
autocomplete_maxerror: 0.001, 0.1

[vc.phantom_colocation.modules.hapticworkspace_calibration]
enabled: True
name: Joint-Angle Calibration
dependencies: tooltip_calibration,absolute_orientation_calibration
dfg_filename: calibration_haptic_workspace.dfg
calib_files: phantom_jointangle_correction.calib
recorddir: %(record_directory)s\haptic_workspace_position
; currently we cannot determine if enough samples and coverage was provided
autocomplete_enable: False
; maximum change occuring between optimization runs (for each param p: abs(p[i] - p[i-1]) < e)
autocomplete_maxerror: 0.001

[vc.phantom_colocation.modules.hapticgimbal_init_calibration]
enabled: True
name: Gimbal Reference-Axis Initialization
dependencies: tooltip_calibration,absolute_orientation_calibration,hapticworkspace_calibration
dfg_filename: calibration_hapticgimbal_initialization.dfg
calib_files: zref_axis.calib
recorddir: %(record_directory)s\haptic_workspace_initialize_orientation

[vc.phantom_colocation.modules.hapticgimbal_calibration]
enabled: True
name: Gimbal-Angle Calibration
dependencies: tooltip_calibration,absolute_orientation_calibration,hapticworkspace_calibration,hapticgimbal_init_calibration
dfg_filename: calibration_hapticgimbal_workspace.dfg
calib_files: phantom_gimbalangle_correction.calib
recorddir: %(record_directory)s\haptic_workspace_orientation

[vc.phantom_colocation.modules.calibration_result]
enabled: True
name: Phantom Co-Location Result
dependencies: tooltip_calibration,absolute_orientation_calibration,hapticworkspace_calibration,hapticgimbal_init_calibration,hapticgimbal_calibration
report_filename: calibration_report.yaml


;
;
; ISMAR 14 Demo
;
;
[vc.ismar14]
name: ISMAR 2014
rootdir: %(config_directory)s\vharcalibration
calibdir: %(rootdir)s\calib\ismar14\%(domain_name)s\%(setup_name)s\%(user_name)s
dfgdir: %(rootdir)s\dfgs\ismar14\%(domain_name)s\%(setup_name)s\%(user_name)s\%(platform_name)s
resultsdir: %(data_directory)s\ismar14\%(setup_name)s\%(user_name)s
facade_handler: inprocess
haptic_device: phantom_premium15

[vc.ismar14.modules.calibration_start]
enabled: True
name: Start ISMAR14 Demo

[vc.ismar14.modules.ismar14_step01]
enabled: True
dfg_filename: ismar14_step01.dfg
name: Data Collection Step 01
dependencies: calibration_start
recorddir: %(record_directory)s\ismar14_step01

[vc.ismar14.modules.ismar14_step02]
enabled: True
dfg_filename: ismar14_step02.dfg
name: Data Collection Step 02
dependencies: ismar14_step01
recorddir: %(record_directory)s\ismar14_step02

[vc.ismar14.modules.ismar14_step03]
enabled: True
dfg_filename: ismar14_step03.dfg
name: Data Collection Step 03
dependencies: ismar14_step02
recorddir: %(record_directory)s\ismar14_step03

[vc.ismar14.modules.ismar14_step04]
enabled: True
dfg_filename: ismar14_step04.dfg
name: Data Collection Step 04
dependencies: ismar14_step03
recorddir: %(record_directory)s\ismar14_step04

[vc.ismar14.modules.ismar14_calibration]
enabled: True
dfg_filename: ismar14_calibration.dfg
name: Compute Calibration
dependencies: ismar14_step01,ismar14_step02,ismar14_step03,ismar14_step04
data_step01: %(record_directory)s\ismar14_step01
data_step02: %(record_directory)s\ismar14_step02
data_step03: %(record_directory)s\ismar14_step03
data_step04: %(record_directory)s\ismar14_step04
calib_files: tooltip_calibration.calib,absolute_orientation_calibration.calib,phantom_jointangle_correction.calib,phantom_gimbalangle_correction.calib
;data_step01: C:\HapticCalib\vhardata_mvl\ismar14\magicvisionlab\mvl\20140806-1614\record\ismar14_step01
;data_step02: C:\HapticCalib\vhardata_mvl\ismar14\magicvisionlab\mvl\20140806-1614\record\ismar14_step02
;data_step03: C:\HapticCalib\vhardata_mvl\ismar14\magicvisionlab\mvl\20140806-1614\record\ismar14_step03
;data_step04: C:\HapticCalib\vhardata_mvl\ismar14\magicvisionlab\mvl\20140806-1614\record\ismar14_step04


[vc.ismar14.modules.ismar14_calibration.parameters]
; tooltip calibration
tt_minimal_angle_between_measurements: 0.1

; absolute orientation calibration
ao_inital_maxdistance_from_origin: 0.1
ao_minimal_distance_between_measurements: 0.01
ao_refinement_expand_coverage: 1.5
ao_refinement_shrink_distance: 1.0

; joint angles calibration
ja_minimal_distance_between_measurements: 0.01
ja_maximum_distance_to_reference: 0.02
ja_refinement_min_difference: 0.00001
ja_refinement_max_iterations: 3
ja_refinement_shrink_distance: 0.9

; reference orientation
ro_minimal_angle_between_measurements: 0.1

; gimbal angles calibration
ga_minimal_angle_between_measurements: 0.1


[vc.ismar14.modules.calibration_result]
enabled: True
name: ISMAR14 Calibration Results
dependencies: ismar14_calibration
report_filename: calibration_report.yaml


;
;
; 3Way Time Delay Estimation
;
;
[vc.time_delay_estimation_3way]
name: 3Way Time Delay Estimation
rootdir: %(config_directory)s\vharcalibration
calibdir: %(rootdir)s\calib\time_delay_estimation_3way\%(domain_name)s\%(setup_name)s\%(user_name)s
dfgdir: %(rootdir)s\dfgs\time_delay_estimation_3way\%(domain_name)s\%(setup_name)s\%(user_name)s\%(platform_name)s
resultsdir: %(data_directory)s\time_delay_estimation_3way\%(setup_name)s\%(user_name)s
facade_handler: inprocess
haptic_device: phantom_premium15

[vc.time_delay_estimation_3way.initialize_files]
reference_to_external_tracker_handeye_calibration.calib: %(config_directory)s\vharcalibration\calib\init\absolute_orientation_calibration.calib
absolute_orientation_external_tracker_phantom_calibration.calib: %(config_directory)s\vharcalibration\calib\init\absolute_orientation_calibration.calib
absolute_orientation_external_tracker_reference_calibration.calib: %(config_directory)s\vharcalibration\calib\init\absolute_orientation_calibration.calib
absolute_orientation_reference_phantom_calibration.calib: %(config_directory)s\vharcalibration\calib\init\absolute_orientation_calibration.calib
delay_haptic_to_external_tracker.calib: %(config_directory)s\vharcalibration\calib\init\delay_haptic_to_external_tracker.calib
delay_haptic_to_reference.calib: %(config_directory)s\vharcalibration\calib\init\delay_haptic_to_external_tracker.calib
delay_reference_to_external_tracker.calib: %(config_directory)s\vharcalibration\calib\init\delay_haptic_to_external_tracker.calib

[vc.time_delay_estimation_3way.modules.calibration_start]
enabled: True
name: Start 3Way Time Delay Estimation Calibration

[vc.time_delay_estimation_3way.modules.tracker_handeye]
enabled: True
name: Tracker Hand-Eye
dependencies: calibration_start
dfg_filename: calibration_tracker_handeye.dfg
calib_files: reference_to_external_tracker_handeye_calibration.calib
recorddir: %(record_directory)s\tracker_handeye


[vc.time_delay_estimation_3way.modules.absolute_orientation_calibration_3way]
enabled: True
name: Absolute Orientation 3Way
dependencies: calibration_start,tracker_handeye
dfg_filename: calibration_absolute_orientation_3way.dfg
calib_files: absolute_orientation_external_tracker_phantom_calibration.calib,absolute_orientation_external_tracker_reference_calibration.calib,absolute_orientation_reference_phantom_calibration.calib
recorddir: %(record_directory)s\absolute_orientation_3way

[vc.time_delay_estimation_3way.modules.timedelay_estimation_calibration_3way]
enabled: True
name: Time-Delay Estimation
dependencies: tracker_handeye,absolute_orientation_calibration_3way
calib_files: delay_haptic_to_external_tracker.calib,delay_haptic_to_reference.calib,delay_reference_to_external_tracker.calib
dfg_filename: calibration_timedelay_3way.dfg


[vc.time_delay_estimation_3way.modules.calibration_result]
enabled: True
name: Phantom Co-Location Result
dependencies: tracker_handeye,absolute_orientation_calibration_3way,timedelay_estimation_calibration_3way
report_filename: calibration_report.yaml


;
;
; 3Way VHAR Workspace Calibration (XXX UNFINISHED)
;
;
[vc.workspace_calibration_3way]
name: VHAR Workspace Calibration (3way)
rootdir: %(config_directory)s\vharcalibration
calibdir: %(rootdir)s\calib\ismar14\%(domain_name)s\%(setup_name)s\%(user_name)s
dfgdir: %(rootdir)s\dfgs\ismar14\%(domain_name)s\%(setup_name)s\%(user_name)s\%(platform_name)s
resultsdir: %(data_directory)s\ismar14\%(setup_name)s\%(user_name)s
facade_handler: inprocess
haptic_device: phantom_premium15

[vc.workspace_calibration_3way.modules.calibration_start]
enabled: True
name: Start VHAR Workspace Calibration

[vc.workspace_calibration_3way.modules.offline_datacollection.step01]
enabled: True
dfg_filename: ismar14_step01.dfg
name: Data Collection Step 01
dependencies: calibration_start
recorddir: %(record_directory)s\ismar14_step01

[vc.workspace_calibration_3way.modules.offline_datacollection.step02]
enabled: True
dfg_filename: ismar14_step02.dfg
name: Data Collection Step 02
dependencies: offline_datacollection.step01
recorddir: %(record_directory)s\ismar14_step02

[vc.workspace_calibration_3way.modules.offline_datacollection.step03]
enabled: True
dfg_filename: ismar14_step03.dfg
name: Data Collection Step 03
dependencies: offline_datacollection.step02
recorddir: %(record_directory)s\ismar14_step03

[vc.workspace_calibration_3way.modules.offline_calibration.use_externaltracker]
enabled: True
dfg_filename: ismar14_calibration.dfg
name: Compute Calibration (ExternalTracker)
dependencies: offline_datacollection.step01,offline_datacollection.step02,offline_datacollection.step03
data_step01: %(record_directory)s\ismar14_step01
data_step02: %(record_directory)s\ismar14_step02
data_step03: %(record_directory)s\ismar14_step03
calib_files: tooltip_calibration.calib,absolute_orientation_calibration.calib,phantom_jointangle_correction.calib,phantom_gimbalangle_correction.calib


[vc.workspace_calibration_3way.parameters.offline_calibration.use_externaltracker]
; tooltip calibration
enable_tooltip: False
tt_minimal_angle_between_measurements: 0.1

; absolute orientation calibration
enable_absolute_orientation: True
ao_inital_maxdistance_from_origin: 0.1
ao_minimal_distance_between_measurements: 0.01
ao_refinement_expand_coverage: 1.5
ao_refinement_shrink_distance: 1.0

; joint angles calibration
enable_joint_angle_calibration: True
ja_minimal_distance_between_measurements: 0.01
ja_maximum_distance_to_reference: 0.02
ja_refinement_min_difference: 0.00001
ja_refinement_max_iterations: 3
ja_refinement_shrink_distance: 0.9

; reference orientation
enable_reference_orientation: False
ro_minimal_angle_between_measurements: 0.1

; gimbal angles calibration
enable_gimbal_angle_calibration: True
ga_minimal_angle_between_measurements: 0.1

[vc.workspace_calibration_3way.modules.offline_calibration.use_referencetracker]
enabled: True
dfg_filename: ismar14_calibration.dfg
name: Compute Calibration (Reference)
dependencies: offline_datacollection.step01,offline_datacollection.step02,offline_datacollection.step03
data_step01: %(record_directory)s\ismar14_step01
data_step02: %(record_directory)s\ismar14_step02
data_step03: %(record_directory)s\ismar14_step03
calib_files: tooltip_calibration.calib,absolute_orientation_calibration.calib,phantom_jointangle_correction.calib,phantom_gimbalangle_correction.calib


[vc.workspace_calibration_3way.parameters.offline_calibration.use_referencetracker]
; tooltip calibration
enable_tooltip: False
tt_minimal_angle_between_measurements: 0.1

; absolute orientation calibration
enable_absolute_orientation: True
ao_inital_maxdistance_from_origin: 0.1
ao_minimal_distance_between_measurements: 0.01
ao_refinement_expand_coverage: 1.5
ao_refinement_shrink_distance: 1.0

; joint angles calibration
enable_joint_angle_calibration: True
ja_minimal_distance_between_measurements: 0.01
ja_maximum_distance_to_reference: 0.02
ja_refinement_min_difference: 0.00001
ja_refinement_max_iterations: 3
ja_refinement_shrink_distance: 0.9

; reference orientation
enable_reference_orientation: False
ro_minimal_angle_between_measurements: 0.1

; gimbal angles calibration
enable_gimbal_angle_calibration: True
ga_minimal_angle_between_measurements: 0.1


[vc.workspace_calibration_3way.modules.calibration_result]
enabled: True
name: VHAR Workspace Calibration Results
dependencies: offline_calibration.use_externaltracker,offline_calibration.use_referencetracker
report_filename: calibration_report.yaml

